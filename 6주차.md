
# [ê¸°íšì„œ](https://ovenapp.io/view/cAeItz2pfoYK0XLCZMkbXeF8OKBmG1Ls/) 

# DB table ì„¤ê³„

```SQL
create table users (
                       id bigint not null auto_increment,
                       email varchar(320) unique not null,
                       password varchar(255) not null,
                       nickname varchar(100),
                       profile_image_url varchar(512),
                       bio varchar(300),
                       created_at timestamp default current_timestamp,
                       updated_at timestamp default current_timestamp on update current_timestamp,
                       primary key (id)
) engine=InnoDB;

create table post (
                      id bigint not null auto_increment,
                      location varchar(100) not null,
                      title varchar(255) not null,
                      content mediumtext,
                      views integer not null default 0,
                      post_writer_id bigint,
                      created_at timestamp default current_timestamp,
                      updated_at timestamp default current_timestamp on update current_timestamp,
                      primary key (id),
                      index idx_post_writer_id (post_writer_id)
) engine=InnoDB;

create table comment (
                         id bigint not null auto_increment,
                         content text,
                         comment_writer_id bigint,
                         post_id bigint,
                         created_at timestamp default current_timestamp,
                         updated_at timestamp default current_timestamp on update current_timestamp,
                         primary key (id),
                         index idx_comment_writer_id (comment_writer_id),
                         index idx_comment_post_id (post_id)
) engine=InnoDB;

create table reply (
                       id bigint not null auto_increment,
                       content text,
                       reply_writer_id bigint,
                       comment_id bigint,
                       created_at timestamp default current_timestamp,
                       updated_at timestamp default current_timestamp on update current_timestamp,
                       primary key (id),
                       index idx_reply_writer_id (reply_writer_id),
                       index idx_reply_comment_id (comment_id)
) engine=InnoDB;

alter table post
    add constraint FK_post_writer_id
        foreign key (post_writer_id)
            references users (id);

alter table comment
    add constraint FK_comment_writer_id
        foreign key (comment_writer_id)
            references users (id);

alter table comment
    add constraint FK_comment_post_id
        foreign key (post_id)
            references post (id);

alter table reply
    add constraint FK_reply_writer_id
        foreign key (reply_writer_id)
            references users (id);

alter table reply
    add constraint FK_reply_comment_id
        foreign key (comment_id)
            references comment (id);
```

# API ìŠ¤íŒ© 

## ğŸ·ï¸Auth API
### ğŸ”–íšŒì› ê°€ì… 
- **POST /api/auth/signup**

#### Request 
##### Body
| ì´ë¦„ | íƒ€ì… | ì„¤ëª… | required |
|----|----|----|----|
| email | string | ì´ë©”ì¼ | O |
| password | string | ë¹„ë°€ë²ˆí˜¸ | O |
| nickname | string | ë‹‰ë„¤ì„ | O |
| profileImageUrl | string | í”„ë¡œí•„ ì´ë¯¸ì§€ URL | X |
| bio | string | ìê¸°ì†Œê°œ | X |

#### Response
##### ì„±ê³µ
- **Status Code**: 201 Created

##### ì‹¤íŒ¨ 
- **Status Code**: 400 Bad Request
- **Status Code**: 409 Conflict (ì´ë©”ì¼ ì¤‘ë³µ)

---

### ğŸ”–ë¡œê·¸ì¸
- **POST /api/auth/login**

#### Request
##### Body
| ì´ë¦„ | íƒ€ì… | ì„¤ëª… | required |
|----|----|----|----|
| email | string | ì´ë©”ì¼ | O |
| password | string | ë¹„ë°€ë²ˆí˜¸ | O |

#### Response
##### ì„±ê³µ
- **Status Code**: 200 OK

###### Header

```HTTP
Set-Cookie: access_token=JWT_TOKEN; HttpOnly; Secure
```

##### ì‹¤íŒ¨
- **Status Code**: 400 Bad Request
- **Status Code**: 401 Unauthorized
- **Status Code**: 404 Not Found

---

### ğŸ”–ë¡œê·¸ì•„ì›ƒ
- **DELETE /api/auth/logout**

#### Request
##### Header
```HTTP
Cookie: access_token=JWT_TOKEN
```

#### Response
##### ì„±ê³µ
- **Status Code**: 204 No Content

##### ì‹¤íŒ¨
- **Status Code**: 401 Unauthorized
- **Status Code**: 404 Not Found

---

## ğŸ·ï¸User API


