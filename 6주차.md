
# [기획서](https://ovenapp.io/view/cAeItz2pfoYK0XLCZMkbXeF8OKBmG1Ls/) 

# DB table 설계
![travel-board.png](/img%2Ftravel-board.png)

```SQL
create table users (
                       id bigint not null auto_increment,
                       email varchar(320) unique not null,
                       password varchar(255) not null,
                       nickname varchar(45),
                       profile_image_url varchar(512),
                       bio varchar(300),
                       created_at timestamp default current_timestamp,
                       updated_at timestamp default current_timestamp on update current_timestamp,
                       primary key (id)
) engine=InnoDB;

create table post (
                      id bigint not null auto_increment,
                      location varchar(60) not null,
                      title varchar(255) not null,
                      content mediumtext,
                      views integer not null default 0,
                      post_writer_id bigint,
                      created_at timestamp default current_timestamp,
                      updated_at timestamp default current_timestamp on update current_timestamp,
                      primary key (id),
                      constraint FK_post_writer_id foreign key (post_writer_id) references users (id),
                      index idx_post_writer_id (post_writer_id)
) engine=InnoDB;

create table comment (
                         id bigint not null auto_increment,
                         content text,
                         comment_writer_id bigint,
                         post_id bigint,
                         created_at timestamp default current_timestamp,
                         updated_at timestamp default current_timestamp on update current_timestamp,
                         primary key (id),
                         constraint FK_comment_writer_id foreign key (comment_writer_id) references users (id)
                         constraint FK_comment_post_id foreign key (post_id) references post (id)
                         index idx_comment_writer_id (comment_writer_id),
                         index idx_comment_post_id (post_id)
) engine=InnoDB;

create table reply (
                       id bigint not null auto_increment,
                       content text,
                       reply_writer_id bigint,
                       comment_id bigint,
                       created_at timestamp default current_timestamp,
                       updated_at timestamp default current_timestamp on update current_timestamp,
                       primary key (id),
                       constraint FK_reply_writer_id foreign key (reply_writer_id) references users (id)
                       constraint FK_reply_comment_id foreign key (comment_id) references comment (id)
                       index idx_reply_writer_id (reply_writer_id),
                       index idx_reply_comment_id (comment_id)
) engine=InnoDB;

alter table post
    add constraint FK_post_writer_id
        foreign key (post_writer_id)
            references users (id);

alter table comment
    add constraint FK_comment_writer_id
        foreign key (comment_writer_id)
            references users (id);

alter table comment
    add constraint FK_comment_post_id
        foreign key (post_id)
            references post (id);

alter table reply
    add constraint FK_reply_writer_id
        foreign key (reply_writer_id)
            references users (id);

alter table reply
    add constraint FK_reply_comment_id
        foreign key (comment_id)
            references comment (id);
```

# API 스팩 

## 🏷️Auth API
### 🔖회원 가입 
- **POST /api/auth/signup**

#### Request 
##### Body
| 이름 | 타입 | 설명 | required |
|----|----|----|----|
| email | string | 이메일 | O |
| password | string | 비밀번호 | O |
| nickname | string | 닉네임 | O |
| profileImageUrl | string | 프로필 이미지 URL | X |
| bio | string | 자기소개 | X |

#### Response
##### 성공
- **Status Code**: 201 Created

##### 실패 
- **Status Code**: 400 Bad Request
- **Status Code**: 409 Conflict

---

### 🔖로그인
- **POST /api/auth/login**

#### Request
##### Body
| 이름 | 타입 | 설명 | required |
|----|----|----|----|
| email | string | 이메일 | O |
| password | string | 비밀번호 | O |

#### Response
##### 성공
- **Status Code**: 200 OK

###### Header

```HTTP
Set-Cookie: access_token=JWT_TOKEN; HttpOnly; Secure
```

##### 실패
- **Status Code**: 400 Bad Request
- **Status Code**: 401 Unauthorized
- **Status Code**: 404 Not Found

---

### 🔖로그아웃
- **DELETE /api/auth/logout**

#### Request
##### Header
```HTTP
Cookie: access_token=JWT_TOKEN
```

#### Response
##### 성공
- **Status Code**: 204 No Content

##### 실패
- **Status Code**: 401 Unauthorized
- **Status Code**: 404 Not Found

---

## 🏷️User API

### 🔖사용자 정보 조회
- **GET /api/users/{userId}**

#### Request
##### Header

```HTTP
Cookie: access_token=JWT_TOKEN
```

##### Path Variable
- userId: 조회할 사용자의 ID

#### Response
##### 성공
- **Status Code**: 200 OK

###### Body
| 이름 | 타입     | 설명 |
|----|--------|----|
| id | number | 사용자 ID |
| email | string | 이메일 |
| nickname | string | 닉네임 |
| profileImageUrl | string | 프로필 이미지 URL |
| bio | string | 자기소개 |
| createdAt | string | 가입일 |
| updatedAt | string | 최근 정보 수정일 |

---

### 🔖사용자 정보 수정
- **PUT /api/users**
#### Request
##### Header

```HTTP
Cookie: access_token=JWT_TOKEN
```

##### Body
| 이름 | 타입 | 설명 | required |
|----|----|----|----------|
| password | string | 비밀번호 | O        |
| nickname | string | 닉네임 | X        |
| profileImageUrl | string | 프로필 이미지 URL | X        |
| bio | string | 자기소개 | X        |

#### Response
##### 성공
- **Status Code**: 200 OK

##### 실패
- **Status Code**: 400 Bad Request
- **Status Code**: 401 Unauthorized
- **Status Code**: 403 Forbidden
- **Status Code**: 404 Not Found

---

## 🏷️Post API

### 🔖게시글 작성
- **POST /api/posts**

#### Request
##### Header

```HTTP
Cookie: access_token=JWT_TOKEN
```

##### Body
| 이름 | 타입 | 설명     | required |
|----|----|--------|----|
| location | string | 장소 | O |
| title | string | 제목 | O |
| content | string | 내용 | O |

#### Response
##### 성공
- **Status Code**: 201 Created

##### 실패
- **Status Code**: 400 Bad Request
- **Status Code**: 401 Unauthorized

---

### 🔖게시글 수정
- **PUT /api/posts/{postId}**

#### Request
##### Header

```HTTP
Cookie: access_token=JWT_TOKEN
```

##### Path Variable
- postId: 수정할 게시글의 ID

##### Body
| 이름 | 타입 | 설명     | required |
|----|----|--------|----|
| location | string | 장소 | X |
| title | string | 제목 | X |
| content | string | 내용 | X |

#### Response
##### 성공
- **Status Code**: 200 OK

##### 실패
- **Status Code**: 400 Bad Request
- **Status Code**: 401 Unauthorized
- **Status Code**: 403 Forbidden
- **Status Code**: 404 Not Found

---

### 🔖게시글 삭제
- **DELETE /api/posts/{postId}**

#### Request
##### Header

```HTTP
Cookie: access_token=JWT_TOKEN
```

##### Path Variable
- postId: 삭제할 게시글의 ID

#### Response
##### 성공
- **Status Code**: 204 No Content

##### 실패
- **Status Code**: 401 Unauthorized
- **Status Code**: 403 Forbidden
- **Status Code**: 404 Not Found

---

### 🔖게시글 단건 조회

- **GET /api/posts/{postId}**

#### Request
##### Path Variable
- postId: 조회할 게시글의 ID

#### Response
##### 성공
- **Status Code**: 200 OK

###### Body
| 이름 | 타입 | 설명 |
|----|----|----|
| id | number | 게시글 ID |
| location | string | 장소 |
| title | string | 제목 |
| content | string | 내용 |
| views | number | 조회수 |
| postWriterId | number | 게시글 작성자 ID |
| postWriterNickname | string | 게시글 작성자 닉네임 |
| createdAt | string | 작성일 |
| updatedAt | string | 최근 정보 수정일 |

##### 실패
- **Status Code**: 404 Not Found

---

### 🔖게시글 목록 조회
- **GET /api/posts**

#### Request

##### Query Parameter

| 이름             | 타입     | 설명                       | required |
|----------------|--------|--------------------------|--------|
| page           | number | 페이지 번호(기본값: 1)           | X      |
| size           | number | 페이지 크기(기본값: 10, 최대값 100) | X      |
| location       | string | 장소                       | X      |
| title          | string | 제목                       | X      |
| content        | string | 내용                       | X      |
| writerNickname | string | 작성자 닉네임                  | X      |

#### Response
##### 성공
- **Status Code**: 200 OK

###### Body
| 이름                    | 타입 | 설명 |
|-----------------------|----|----|
| [].id                 | number | 게시글 ID |
| [].location           | string | 장소 |
| [].title              | string | 제목 |
| [].content            | string | 내용 |
| [].views              | number | 조회수 |
| [].postWriterId       | number | 게시글 작성자 ID |
| [].postWriterNickname | string | 게시글 작성자 닉네임 |
| [].createdAt          | string | 작성일 |
| [].updatedAt          | string | 최근 정보 수정일 |

---

### 🔖게시글의 댓글 조회

- **GET /api/posts/{postId}/comments**

#### Request
##### Path Variable
- postId: 조회할 게시글의 ID

##### Query Parameter

| 이름 | 타입 | 설명 | required |
|----|----|----|----|
| page | number | 페이지 번호(기본값: 1) | X |
| size | number | 페이지 크기(기본값: 10, 최대값 100) | X |

#### Response
##### 성공
- **Status Code**: 200 OK

###### Body

| 이름                       | 타입 | 설명 |
|--------------------------|----|----|
| [].id                    | number | 댓글 ID |
| [].content               | string | 내용 |
| [].commentWriterId       | number | 댓글 작성자 ID |
| [].commentWriterNickname | string | 댓글 작성자 닉네임 |
| [].createdAt             | string | 작성일 |
| [].updatedAt             | string | 최근 정보 수정일 |
| [].replies               | array | 댓글의 답글 목록 |
| [].replies[].id          | number | 답글 ID |
| [].replies[].content     | string | 내용 |
| [].replies[].replyWriterId | number | 답글 작성자 ID |
| [].replies[].replyWriterNickname | string | 답글 작성자 닉네임 |
| [].replies[].createdAt   | string | 작성일 |
| [].replies[].updatedAt   | string | 최근 정보 수정일 |

##### 실패
- **Status Code**: 404 Not Found

---

### 🔖내 게시글 조회
- **GET /api/posts/my**

#### Request
- **Query Parameter**: 게시글 목록 조회와 동일
##### Header

```HTTP
Cookie: access_token=JWT_TOKEN
```

#### Response
##### 성공
- **Status Code**: 200 OK
- **Body**: 게시글 목록 조회와 동일

##### 실패
- **Status Code**: 401 Unauthorized
- **Status Code**: 404 Not Found

---

# maven vs gradle

[maven getting started guide](https://maven.apache.org/guides/getting-started/index.html)
[maven guide](https://www.baeldung.com/maven-guide)
[gradle guide](https://www.baeldung.com/gradle-guide)
[gradle user manual](https://docs.gradle.org/current/userguide/userguide.html)
[gradle 공식문서 maven vs gradle](https://gradle.org/maven-vs-gradle/)
